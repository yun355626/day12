<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>å¦™éº—æ­²æ•¸è¨ˆç®—æ©Ÿ</title>

  <style>
    /* å…¨åŸŸè¨­å®š */
    * {
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    /* èƒŒæ™¯ä»¥æ‰‹æ©Ÿç‚ºä¸»ï¼šæŸ”å’Œæ¼¸å±¤ + ä¸Šä¸‹ç•™ä¸€é»ç©ºé–“ */
    body {
      margin: 0;
      padding: 16px 12px;
      min-height: 100vh;
      background: radial-gradient(circle at top, #ffe9f5 0, #fef5ff 40%, #f6f7ff 100%);
    }

    /* ä¸»å¡ç‰‡ï¼šæ‰‹æ©Ÿç‰ˆå·¦å³ç•™ä¸€é»é‚Šï¼Œçœ‹èµ·ä¾†åƒ App å¡ç‰‡ */
    .app-container {
      margin: 0 auto;
      width: 100%;
      max-width: 420px;                 /* é©åˆæ‰‹æ©Ÿå¯¬åº¦ 320â€“420 */
      background: #ffffff;
      border-radius: 18px;
      padding: 18px 18px 20px;
      box-shadow: 0 10px 26px rgba(0, 0, 0, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.9);
    }

    /* ç‹—ç‹—é ­åƒï¼šç¨å¾®å¤§ä¸€é» */
    .dog-photo {
      width: 110px;
      height: 110px;
      border-radius: 50%;
      overflow: hidden;
      margin: 4px auto 10px;
      border: 4px solid #fff;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.12);
    }

    .dog-photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .app-title {
      font-size: 18px;
      font-weight: 700;
      text-align: center;
      margin-bottom: 4px;
      color: #333;
    }

    .subtitle {
      font-size: 12px;
      text-align: center;
      color: #777;
      margin-bottom: 16px;
    }

    .input-group {
      margin-bottom: 10px;
    }

    label {
      display: block;
      font-size: 13px;
      color: #444;
      margin-bottom: 6px;
    }

    input[type="date"] {
      width: 100%;
      padding: 9px 12px;
      border-radius: 10px;
      border: 1px solid #ddd;
      font-size: 14px;
      background: #fafafa;
      outline: none;
      transition: border-color 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    input[type="date"]:focus {
      border-color: #a96dff;
      box-shadow: 0 0 0 2px rgba(169, 109, 255, 0.25);
      background: #ffffff;
    }

    /* æŒ‰éˆ•ï¼šå¯¬åº¦ 100%ï¼Œæ›´åƒæ‰‹æ©Ÿ App */
    .btn {
      width: 100%;
      margin-top: 12px;
      padding: 10px 16px;
      border-radius: 999px;
      border: none;
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      color: #fff;
      background: linear-gradient(135deg, #7f6dff, #c46dff);
      box-shadow: 0 4px 12px rgba(120, 88, 255, 0.35);
      transition: transform 0.08s ease, box-shadow 0.08s ease;
    }

    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 14px rgba(120, 88, 255, 0.4);
    }

    .btn:active {
      transform: translateY(0);
      box-shadow: 0 3px 8px rgba(120, 88, 255, 0.25);
    }

    /* çµæœå¡ç‰‡ï¼šç¨å¾®å£“æ‰ä¸€é»ï¼Œä¸é‚£éº¼åšé‡ */
    .result-box {
      margin-top: 16px;
      padding: 10px 11px;
      background: linear-gradient(135deg, #ffe0dd, #ffd8c2);
      border-radius: 12px;
      border: 1px solid rgba(0, 0, 0, 0.03);
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
      font-size: 13px;
      color: #423232;
      line-height: 1.5;
      min-height: 40px;
    }

    .result-highlight {
      font-weight: 700;
      color: #c64646;
    }

    .error {
      color: #d64545;
      font-weight: 700;
    }

    .hint {
      margin-top: 8px;
      font-size: 11px;
      text-align: center;
      color: #999;
    }

    /* æ›´å°è¢å¹•æ™‚å¾®èª¿ï¼šç¸®å° paddingï¼Œè®“ç•«é¢æ›´ç·Šæ¹Š */
    @media (max-width: 360px) {
      body {
        padding: 10px 8px;
      }
      .app-container {
        padding: 16px 14px 18px;
      }
      .app-title {
        font-size: 17px;
      }
    }
  </style>
</head>

<body>
  <div class="app-container">
    <!-- é€™è£¡çš„ src å¯ä»¥æ›æˆä½ æ­£åœ¨ç”¨çš„é‚£å¼µç‹—ç‹—åœ– -->
    <div class="dog-photo">
      <img
        src="https://images.unsplash.com/photo-1537151625747-768eb6cf92b6?auto=format&fit=crop&w=600&q=80"
        alt="å¯æ„›ç‹—ç‹—">
    </div>

    <div class="app-title">ğŸ¶ å¦™éº—æ­²æ•¸è¨ˆç®—æ©Ÿ</div>
    <div class="subtitle">è¼¸å…¥å¦™éº—çš„å‡ºç”Ÿæ—¥æœŸï¼Œå¹«ä½ æ›ç®—æˆã€Œäººé¡å¹´é½¡ã€ï¼</div>

    <div class="input-group">
      <label for="birthDate">å¦™éº—çš„å‡ºç”Ÿæ—¥æœŸï¼š</label>
      <input type="date" id="birthDate" value="2023-02-28" />
    </div>

    <button id="calculateBtn" class="btn">é–‹å§‹è¨ˆç®—</button>

    <div id="result" class="result-box">
      è«‹å…ˆé¸æ“‡å¦™éº—çš„ç”Ÿæ—¥ï¼Œå†æŒ‰ã€Œé–‹å§‹è¨ˆç®—ã€çœ‹çœ‹å¥¹ç¾åœ¨å¹¾æ­²å§ï¼
    </div>

    <div class="hint">
      å…¬å¼ï¼šäººé¡å¹´é½¡ = 16 Ã— ln(ç‹—ç‹—å¯¦éš›å¹´æ•¸) + 31
    </div>
  </div>

  <script>
    const dogName = "å¦™éº—";
    const STORAGE_KEY = "miaoLiDogAgeResult";

    const birthInput = document.getElementById("birthDate");
    const resultBox = document.getElementById("result");
    const calculateBtn = document.getElementById("calculateBtn");

    /** é¡¯ç¤ºçµæœæ–‡å­— */
    function renderResult(dogAgeDisplay, humanAgeDisplay) {
      resultBox.innerHTML =
        `${dogName}ç¾åœ¨å¤§ç´„ <span class="result-highlight">${dogAgeDisplay}</span> æ­²ç‹—ç‹—å¹´é½¡ï¼Œ` +
        `æ›ç®—æˆäººé¡å¹´é½¡å¤§ç´„æ˜¯ <span class="result-highlight">${humanAgeDisplay}</span> æ­²ã€‚`;
    }

    /** å­˜åˆ° localStorage */
    function saveToStorage(birthDateStr, dogAgeDisplay, humanAgeDisplay) {
      const payload = {
        birthDate: birthDateStr,
        dogAge: dogAgeDisplay,
        humanAge: humanAgeDisplay,
        savedAt: new Date().toISOString(),
      };
      localStorage.setItem(STORAGE_KEY, JSON.stringify(payload));
    }

    /** å¾ localStorage è¼‰å…¥ä¸Šä¸€æ¬¡çš„çµæœ */
    function loadFromStorage() {
      const raw = localStorage.getItem(STORAGE_KEY);
      if (!raw) return;

      try {
        const data = JSON.parse(raw);
        if (data.birthDate) {
          birthInput.value = data.birthDate;
        }
        if (data.dogAge && data.humanAge) {
          renderResult(data.dogAge, data.humanAge);
        }
      } catch (e) {
        console.warn("è§£æ localStorage å¤±æ•—ï¼š", e);
      }
    }

    /** é»æ“Šè¨ˆç®—æŒ‰éˆ• */
    calculateBtn.addEventListener("click", () => {
      const birthValue = birthInput.value;

      if (!birthValue) {
        resultBox.innerHTML = '<span class="error">è«‹å…ˆé¸æ“‡å¦™éº—çš„å‡ºç”Ÿæ—¥æœŸå–”ï¼</span>';
        return;
      }

      const birthDate = new Date(birthValue);
      const today = new Date();

      if (birthDate > today) {
        resultBox.innerHTML = '<span class="error">å‡ºç”Ÿæ—¥æœŸä¸èƒ½æ˜¯æœªä¾†çš„æ—¥æœŸï½</span>';
        return;
      }

      // ç‹—ç‹—å¯¦éš›å¹´æ•¸ï¼ˆä»¥å¹´ç‚ºå–®ä½ï¼‰
      const diffMs = today - birthDate;
      const years = diffMs / (1000 * 60 * 60 * 24 * 365.25);

      if (years <= 0) {
        resultBox.innerHTML =
          `${dogName}ç¾åœ¨é‚„æ˜¯å‰›å‡ºç”Ÿçš„å°å¯¶å¯¶ï¼Œå¹´é½¡å¤ªå°æš«æ™‚ç„¡æ³•æ›ç®—æˆäººé¡å¹´é½¡å–”ï¼`;
        return;
      }

      const dogAgeYears = years;
      const humanAgeYears = 16 * Math.log(dogAgeYears) + 31;

      const dogAgeDisplay = dogAgeYears.toFixed(1);
      const humanAgeDisplay = humanAgeYears.toFixed(1);

      renderResult(dogAgeDisplay, humanAgeDisplay);
      saveToStorage(birthValue, dogAgeDisplay, humanAgeDisplay);
    });

    // è¼‰å…¥é é¢æ™‚ï¼ŒæŠŠä¸Šä¸€æ¬¡çš„çµæœå¸¶å‡ºä¾†
    document.addEventListener("DOMContentLoaded", loadFromStorage);
  </script>
</body>
</html>
